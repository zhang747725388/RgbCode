C51 COMPILER V9.01   KEYACTION                                                             04/27/2016 23:53:59 PAGE 1   


C51 COMPILER V9.01, COMPILATION OF MODULE KEYACTION
OBJECT MODULE PLACED IN KeyAction.obj
COMPILER INVOKED BY: C:\keil51\C51\BIN\C51.EXE APP\KeyAction.c BROWSE INCDIR(.\APP;.\BSP;..\..\CodeGroup;..\rgbcode) DEB
                    -UG OBJECTEXTEND PRINT(.\KeyAction.lst) OBJECT(KeyAction.obj)

line level    source

   1          #include "rsystem.h"
   2          SYSTIMER KEY_Tim;//按键时间基数
   3          u8 keyflag=0;
   4          u8 OpenFlag=0;
   5          u8 AutoFlag=0;
   6          void KeyAction(u8 flag){
   7   1        
   8   1      
   9   1                                switch(flag){
  10   2      
  11   2      
  12   2                                          case KEY0_UP:     //增加
  13   2                                                       if(OpenFlag==1){
  14   3                                                         
  15   3                                                          modelflag=modelflag+1;
  16   3                                                                      SetNomalHighPwm();
  17   3                                                                if(modelflag>8){
  18   4                                                                                       modelflag=0;
  19   4                                                                                         SetNomalHighPwm();
  20   4                                                                                               OpenFlag=0;     
  21   4                                                                
  22   4                                                                }
  23   3                                                       }
  24   2                                                       
  25   2                                                break;        
  26   2                                          case KEY1_UP:        //减少
  27   2                                                      
  28   2                                                               if(OpenFlag==1){
  29   3                                                         
  30   3                                                          modelflag=modelflag-1;
  31   3                                                                        SetNomalHighPwm();
  32   3                                                                if(modelflag<1){
  33   4                                                                modelflag=0;
  34   4                                                                  SetNomalHighPwm();
  35   4                                                                       OpenFlag=0;
  36   4                                                                }
  37   3                                                       }       
  38   2                                                                
  39   2                                                break;
  40   2                              case KEY2_UP:           //打开关闭
  41   2                                                         OpenFlag=!OpenFlag;
  42   2                                                              if(OpenFlag==1){
  43   3                                                                      
  44   3                                                                              OpenPower();
  45   3                                                                               modelflag=1;
  46   3                                                                      } else{
  47   3                                                                      
  48   3                                                                         ModeOff();
*** WARNING C206 IN LINE 48 OF APP\KEYACTION.C: 'ModeOff': missing function-prototype
  49   3                                                                          OpenFlag=0; 
  50   3                                                                               modelflag=0;
  51   3                                                                      
  52   3                                                                      }
  53   2      
C51 COMPILER V9.01   KEYACTION                                                             04/27/2016 23:53:59 PAGE 2   

  54   2                                                         
  55   2                                                
  56   2                                                break;
  57   2                                                case KEY3_UP:                    //自动手动切换
  58   2                                                AutoFlag=!AutoFlag;
  59   2                                                                
  60   2                                                break;
  61   2          }
  62   1      }
  63          
  64          void MainKeytask(void){
  65   1      
  66   1                              if(Timer_GetElapse(&KEY_Tim) >3){
  67   2      
  68   2                    keyflag =Key_Scan();
  69   2                            KeyAction(keyflag);
  70   2                    Timer_Reset(&KEY_Tim);
  71   2           }
  72   1       
  73   1      }
  74           


MODULE INFORMATION:   STATIC OVERLAYABLE
   CODE SIZE        =    145    ----
   CONSTANT SIZE    =   ----    ----
   XDATA SIZE       =   ----    ----
   PDATA SIZE       =   ----    ----
   DATA SIZE        =      5    ----
   IDATA SIZE       =   ----    ----
   BIT SIZE         =   ----    ----
END OF MODULE INFORMATION.


C51 COMPILATION COMPLETE.  1 WARNING(S),  0 ERROR(S)
