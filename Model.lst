C51 COMPILER V9.01   MODEL                                                                 04/28/2016 00:09:11 PAGE 1   


C51 COMPILER V9.01, COMPILATION OF MODULE MODEL
OBJECT MODULE PLACED IN Model.obj
COMPILER INVOKED BY: C:\keil51\C51\BIN\C51.EXE APP\Model.c BROWSE INCDIR(.\APP;.\BSP;..\..\CodeGroup;..\rgbcode) DEBUG O
                    -BJECTEXTEND PRINT(.\Model.lst) OBJECT(Model.obj)

line level    source

   1          #include "rsystem.h"
   2          u8 modelflag=0;
   3           u8 DaFlagSwith=0;
   4          void OpenPower(){
   5   1      
   6   1        P21=1;  
   7   1        P15=1;  
   8   1        
   9   1      P37=1;
  10   1      P16=1;
  11   1      P17=0;
  12   1       UpdatePwm(PCA3,145);
  13   1       UpdatePwm(PCA2,199);
  14   1       UpdatePwm(PCA1,241);
  15   1      
  16   1      
  17   1      }
  18           void ClosePower(){
  19   1      
  20   1        P21=0;  
  21   1        P15=0;  
  22   1        
  23   1      P37=0;
  24   1      P16=0;
  25   1      P17=0;
  26   1      P10=0;
  27   1      P11=0;
  28   1      P12=0;
  29   1      P13=0;
  30   1       UpdatePwm(PCA3,255);
  31   1       UpdatePwm(PCA2,255);
  32   1       UpdatePwm(PCA1,255);
  33   1      
  34   1      
  35   1      }
  36          void ModeOFF(){
  37   1      
  38   1              ClosePower();
  39   1         SwitchDavalue(0,0);
  40   1         SwitchDavalue(1,0);
  41   1      
  42   1      }
  43          
  44          /****************************************
  45          ***前三个DA芯片电压都是低电平 0.5(28)V（DA值） 高电平是8.5V(69) 第四个3V AD 69 
  46          ***     后2个都是低电平-8V，高电平17V，还有个恒定的是30V
  47          **************************************/
  48          void ModelGray(){
  49   1      P13=~P13;
  50   1      P10=~P10;
  51   1      P11=~P11;
  52   1      P12=~P12; 
  53   1              if(P13)
  54   1              {
C51 COMPILER V9.01   MODEL                                                                 04/28/2016 00:09:11 PAGE 2   

  55   2                      TH0 = (u8)(PWM_high >> 8);      //如果是输出低电平，则装载高电平时间。
  56   2                      TL0 = (u8)PWM_high;
  57   2              }
  58   1              else    {
  59   2                      TH0 =  (u8)(PWM_low >> 8);      //如果是输出高电平，则装载低电平时间。
  60   2                      TL0 = (u8)PWM_low;
  61   2                      DaFlagSwith++;
  62   2                          if(DaFlagSwith>1){  DaFlagSwith=0;  }
  63   2               
  64   2              }
  65   1      
  66   1      
  67   1      
  68   1      
  69   1      
  70   1      }
  71          /****************************************
  72          ***前三个DA芯片电压都是低电平 4.9V()（DA值） 高电平是5.1(54)V   第四个3V
  73          ***     后2个都是低电平-8V，高电平17V，还有个恒定的是30V
  74          **************************************/
  75          void ModelWhite(){
  76   1      
  77   1      
  78   1              P13=~P13;
  79   1      P10=~P10;
  80   1      P11=~P11;
  81   1      P12=~P12; 
  82   1              if(P13)
  83   1              {
  84   2                      TH0 = (u8)(PWM_high >> 8);      //如果是输出低电平，则装载高电平时间。
  85   2                      TL0 = (u8)PWM_high;
  86   2              }
  87   1              else    {
  88   2                      TH0 =  (u8)(PWM_low >> 8);      //如果是输出高电平，则装载低电平时间。
  89   2                      TL0 = (u8)PWM_low;
  90   2                      DaFlagSwith++;
  91   2               
  92   2              }
  93   1       
  94   1      
  95   1         
  96   1      
  97   1      
  98   1      
  99   1      
 100   1      }
 101          /****************************************
 102          ***前三个DA芯片电压都是低电平 -2（DA值） 高电平是11     第四个3V
 103          ***     后2个都是低电平-8V，高电平17V，还有个恒定的是30V
 104          **************************************/
 105          void ModelBlack(){
 106   1      
 107   1      
 108   1              P13=~P13;
 109   1      P10=~P10;
 110   1      P11=~P11;
 111   1      P12=~P12; 
 112   1              if(P13)
 113   1              {
 114   2                      TH0 = (u8)(PWM_high >> 8);      //如果是输出低电平，则装载高电平时间。
 115   2                      TL0 = (u8)PWM_high;
 116   2              }
C51 COMPILER V9.01   MODEL                                                                 04/28/2016 00:09:11 PAGE 3   

 117   1              else    {
 118   2                      TH0 =  (u8)(PWM_low >> 8);      //如果是输出高电平，则装载低电平时间。
 119   2                      TL0 = (u8)PWM_low;
 120   2                      DaFlagSwith++;
 121   2              }
 122   1      
 123   1          
 124   1      
 125   1      
 126   1      }
 127           /****************************************
 128          ***前2个DA芯片电压都是低电平 4.9V（DA值） 高电平是5.1V 第三个是低电平0 ，高电平10V      第四个3V
 129          ***     后2个都是低电平-8V，高电平17V，还有个恒定的是30V
 130          **************************************/
 131          void ModelR(){
 132   1      
 133   1      
 134   1      
 135   1              P13=~P13;
 136   1      P10=~P10;
 137   1      P11=~P11;
 138   1      P12=~P12; 
 139   1              if(P13)
 140   1              {
 141   2                      TH0 = (u8)(PWM_high >> 8);      //如果是输出低电平，则装载高电平时间。
 142   2                      TL0 = (u8)PWM_high;
 143   2              }
 144   1              else    {
 145   2                      TH0 =  (u8)(PWM_low >> 8);      //如果是输出高电平，则装载低电平时间。
 146   2                      TL0 = (u8)PWM_low;
 147   2                      DaFlagSwith++;
 148   2              }
 149   1      
 150   1        
 151   1      
 152   1      
 153   1      }
 154          /****************************************
 155          *** 第1个DA芯片电压都是低电平 0v（DA值） 高电平是10  2.  4.9(53),5.1 3.  0,10   第四个3V
 156          ***     后2个都是低电平-8V，高电平17V，还有个恒定的是30V
 157          **************************************/
 158          void ModelG(){
 159   1      
 160   1      
 161   1       P13=~P13;
 162   1      P10=~P10;
 163   1      P11=~P11;
 164   1      P12=~P12; 
 165   1              if(P13)
 166   1              {
 167   2                      TH0 = (u8)(PWM_high >> 8);      //如果是输出低电平，则装载高电平时间。
 168   2                      TL0 = (u8)PWM_high;
 169   2              }
 170   1              else    {
 171   2                      TH0 =  (u8)(PWM_low >> 8);      //如果是输出高电平，则装载低电平时间。
 172   2                      TL0 = (u8)PWM_low;
 173   2                      DaFlagSwith++;
 174   2              }
 175   1       
 176   1      
 177   1      
 178   1      
C51 COMPILER V9.01   MODEL                                                                 04/28/2016 00:09:11 PAGE 4   

 179   1      }
 180          /****************************************
 181          ***第1个DA芯片电压都是低电平 -2v（DA值） 高电平是10  2.  -2(20) ,10(82) 3.  4.9,5.1     第四个3V
 182          ***     后2个都是低电平-8V，高电平17V，还有个恒定的是30V
 183          **************************************/
 184          void ModelB(){
 185   1      
 186   1      
 187   1        P13=~P13;
 188   1      P10=~P10;
 189   1      P11=~P11;
 190   1      P12=~P12; 
 191   1              if(P13)
 192   1              {
 193   2                      TH0 = (u8)(PWM_high >> 8);      //如果是输出低电平，则装载高电平时间。
 194   2                      TL0 = (u8)PWM_high;
 195   2              }
 196   1              else    {
 197   2                      TH0 =  (u8)(PWM_low >> 8);      //如果是输出高电平，则装载低电平时间。
 198   2                      TL0 = (u8)PWM_low;
 199   2                      DaFlagSwith++;
 200   2              }
 201   1      
 202   1         
 203   1      
 204   1      
 205   1      
 206   1      }
 207          /****************************************
 208          ***前三个DA芯片电压都是低电平 0（DA值） 高电平是10V     第四个5V 85
 209          ***     后2个都是低电平-8V，高电平17V，还有个恒定的是30V
 210          **************************************/
 211          void ModelOdd(){
 212   1      
 213   1      
 214   1      
 215   1               P13=~P13;
 216   1      P10=~P10;
 217   1      P11=~P11;
 218   1      P12=~P12; 
 219   1              if(P13)
 220   1              {
 221   2                      TH0 = (u8)(PWM_high >> 8);      //如果是输出低电平，则装载高电平时间。
 222   2                      TL0 = (u8)PWM_high;
 223   2              }
 224   1              else    {
 225   2                      TH0 =  (u8)(PWM_low >> 8);      //如果是输出高电平，则装载低电平时间。
 226   2                      TL0 = (u8)PWM_low;
 227   2                      DaFlagSwith++;
 228   2              }
 229   1      
 230   1       
 231   1      
 232   1      
 233   1      
 234   1      }
 235          /****************************************
 236          ***前三个DA芯片电压都是低电平 0（DA值） 高电平是10V     第四个5V        85
 237          ***     后2个都是低电平-8V，高电平17V，还有个恒定的是30V
 238          **************************************/
 239          void ModelEven(){
 240   1      
C51 COMPILER V9.01   MODEL                                                                 04/28/2016 00:09:11 PAGE 5   

 241   1      
 242   1               P13=~P13;
 243   1      P10=~P10;
 244   1      P11=~P11;
 245   1      P12=~P12; 
 246   1              if(P13)
 247   1              {
 248   2                      TH0 = (u8)(PWM_high >> 8);      //如果是输出低电平，则装载高电平时间。
 249   2                      TL0 = (u8)PWM_high;
 250   2              }
 251   1              else    {
 252   2                      TH0 =  (u8)(PWM_low >> 8);      //如果是输出高电平，则装载低电平时间。
 253   2                      TL0 = (u8)PWM_low;
 254   2                      DaFlagSwith++;
 255   2              }
 256   1      
 257   1        
 258   1      
 259   1      
 260   1      
 261   1      }
 262          void SwitchModel(){
 263   1      
 264   1      switch(modelflag){
 265   2      
 266   2      case 1:
 267   2              ModelGray();
 268   2              break;
 269   2      case 2:
 270   2              ModelWhite();
 271   2              break;
 272   2      case 3:
 273   2              ModelBlack();
 274   2              break;
 275   2      case 4:
 276   2              ModelR();
 277   2              break;
 278   2      case 5:
 279   2              ModelG();
 280   2              break;
 281   2      case 6:
 282   2              ModelB();
 283   2              break;
 284   2      case 7:
 285   2              ModelOdd();
 286   2              break;
 287   2      case 8:
 288   2              ModelEven();
 289   2              break;
 290   2      case 0:
 291   2              ModeOFF();
 292   2              break;
 293   2      
 294   2      } 
 295   1      
 296   1      }
 297          void SetDaModeValue(u8 ModelFlag){
 298   1       
 299   1      
 300   1        if(DaFlagSwith>1){
 301   2              
 302   2                        DaFlagSwith=0;
C51 COMPILER V9.01   MODEL                                                                 04/28/2016 00:09:11 PAGE 6   

 303   2              
 304   2              }
 305   1              switch(DaFlagSwith){
 306   2           case 1: SwitchDavalue(1,ModelFlag) ;
 307   2               break;
 308   2              
 309   2              case 0:  SwitchDavalue(0,ModelFlag);
 310   2              break;
 311   2               
 312   2              }
 313   1                 if(DaFlagSwith>2){
 314   2              
 315   2                        DaFlagSwith=0;
 316   2              
 317   2              }
 318   1      
 319   1      
 320   1      
 321   1      }


MODULE INFORMATION:   STATIC OVERLAYABLE
   CODE SIZE        =    440    ----
   CONSTANT SIZE    =   ----    ----
   XDATA SIZE       =   ----    ----
   PDATA SIZE       =   ----    ----
   DATA SIZE        =      2       1
   IDATA SIZE       =   ----    ----
   BIT SIZE         =   ----    ----
END OF MODULE INFORMATION.


C51 COMPILATION COMPLETE.  0 WARNING(S),  0 ERROR(S)
